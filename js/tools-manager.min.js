function make_tools_manager_sort_received(e){jQuery(e).hasClass("empty")&&jQuery(e).removeClass("empty").find(".empty").remove()}function make_tools_manager_sort_removed(e){jQuery(e).children().length===0&&jQuery(e).append($('<div class="empty">empty</div>')).addClass("empty")}function make_tools_manager_sort_update(e){make_tools_manager_update_tools()}function make_tools_manager_update_tools(){var e=0;jQuery(".tools-wrapper").each(function(t,n){jQuery(this).attr("id","tool-"+e);jQuery("#tool-"+e+' input[type="hidden"]').attr({name:"tool-number-"+e,value:e});jQuery("#tool-"+e+" .tool-title h3").html("Tool "+e);jQuery("#tool-"+e+" input#tools-name").attr("name","tools-name-"+e);jQuery("#tool-"+e+" input#tools-url").attr("name","tools-url-"+e);jQuery("#tool-"+e+" input#tools-thumb").attr("name","tools-thumb-"+e);jQuery("#tool-"+e+" textarea#tools-notes").attr("name","tools-notes-"+e);e++})}jQuery(document).ready(function(e){e("#make_magazine_tools_step_manager h3.hndle").prepend('<span class="tools-ico"></span>');e(".add-tool").click(function(){var t=e(".tools-wrapper").length,n=e(".tools-template").clone(!0).removeClass("tools-template").addClass("hide").attr("id","tool-"+t);e('input[name="total-tools"]').val(t);n.appendTo(e(this).parent()).slideDown().find(".tool-title h3").html("Tool "+t);e("#tool-"+t+' input[name="tools-name-0"]').attr("name","tools-name-"+t);e("#tool-"+t+' input[name="tools-url-0"]').attr("name","tools-url-"+t);e("#tool-"+t+' input[name="tools-thumb-0"]').attr("name","tools-thumb-"+t);e("#tool-"+t+' textarea[name="tools-notes-0"]').attr("name","tools-notes-"+t)});e(".remove-tool").click(function(){e(this).parent().parent().slideUp(500,function(){jQuery(this).remove();make_tools_manager_update_tools();var t=e(".tools-wrapper").length-1;e('input[name="total-tools"]').val(t)})});e(".tools.sortable").sortable({placeholder:"ui-state-highlight",items:"div.tools-wrapper:not(.tools-template)",axis:"y",receive:function(e,t){make_tools_manager_sort_received(this)},remove:function(e,t){make_tools_manager_sort_removed(this)},update:function(e,t){make_tools_manager_sort_update(this)}})});