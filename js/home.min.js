// Handle Error checking on the forms
function validateForm(e){var t=[];jQuery(e).attr("id")=="articleform"?jQuery(e).children().each(function(e,n){if(jQuery(this).hasClass("control-group")&&jQuery(this).hasClass("required")){if(!jQuery(this).find(":input").val()||!jQuery(this).find(":input").is(":checked")){jQuery(this).hasClass("success")&&jQuery(this).removeClass("success");jQuery(this).addClass("error");t[e]=!1}if(jQuery(this).hasClass("error")&&jQuery(this).find(":input").val()){if(jQuery(this).find(":input").prop("type")==="radio"&&!jQuery(this).find(":input").is(":checked"))return!0;jQuery(this).removeClass("error").addClass("success");t[e]=!0}}}):jQuery(e).children().each(function(e,n){if(jQuery(this).hasClass("control-group")){if(!jQuery(this).find(":input").val()||!jQuery(this).find(":input").is(":checked")){jQuery(this).hasClass("success")&&jQuery(this).removeClass("success");jQuery(this).addClass("error");t[e]=!1}if(jQuery(this).hasClass("error")&&jQuery(this).find(":input").val()){if(jQuery(this).find(":input").prop("type")==="radio"&&!jQuery(this).find(":input").is(":checked"))return!0;jQuery(this).removeClass("error").addClass("success");t[e]=!0}}});return t.every(function(e){return e===!0})}jQuery(document).ready(function(){function t(){temp=Math.floor(Math.random()*100+1);return temp!==1?temp:t()}function n(t,n,r){e===!0&&alert("jqXHR: "+r.responseText+" textStatus: "+n+" data: "+t);jQuery("div.controls > *:not(span,p)").val("");jQuery('.ugc-inner-wrapper > input[name="post_ID"]').attr({value:t});jQuery("#modal-uploader").modal({show:!0,backdrop:"static"});a("#page2")}function r(t,n,r){e===!0&&alert("jqXHR: "+t+" textStatus: "+n+" errorThrown: "+r);f("#page2")}function i(t,n,r){e===!0&&alert("jqXHR: "+r.responseText+" textStatus: "+n+" data: "+t);jQuery('*[id^="linksub_"]').val("");a("#linksub");c()}function s(t,n,r){e===!0&&alert("jqXHR: "+t+" textStatus: "+n+" errorThrown: "+r);f("#linksub")}function o(t,n,r){e===!0&&alert("jqXHR: "+r.responseText+" textStatus: "+n+" data: "+t);jQuery("#articleform").find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"textarea":jQuery(this).val("");break;case"checkbox":case"radio":this.checked=!1}});a("#article");c()}function u(t,n,r){e===!0&&alert("jqXHR: "+t+" textStatus: "+n+" errorThrown: "+r);f("#article")}function a(e){var t='<div class="alert alert-success"><button type="button" class="close" data-dismiss="alert">×</button><strong>Well done!</strong> You successfully submitted content to MAKE.</div>';jQuery(e).append(t)}function f(e){var t='<div class="alert alert-error"><button type="button" class="close" data-dismiss="alert">×</button><strong>Whoa!</strong> Something went wrong with this submission, please try again.</div>';jQuery(e).append(t)}function l(e){var t='<div class="alert alert-info"><button type="button" class="close" data-dismiss="alert">×</button><strong>Oops</strong> There are some required fields which need to be filled in above, highlighted in red.</div>';jQuery(e).append(t)}function c(){window.location="http://makezine.com/submission/"}var e=!1;jQuery("#page2form").submit(function(t){t.preventDefault();if(validateForm(this)){var i=jQuery(this).serialize(),s="&";jQuery('*[id^="page2_"]').each(function(e){e>0&&(s+="&");s+=jQuery(this).attr("id");s+="=";s+=jQuery(this).val()});e===!0&&console.log(i);e===!0&&console.log(s);jQuery.ajax({type:"POST",cache:!1,url:MakeAjax.makeajaxurl,data:i+s,success:n,error:r})}else{e===!0&&alert("Valid: "+console.log(jQuery("#page2form").valid()));l("#page2")}});jQuery('input[id^="ug_photo"]').live("change",function(){var e=[],n=jQuery('label[for^="ug_photo"]'),r=5;n.each(function(t,n){jQuery(this).children().val()?e[t]=!0:e[t]=!1});if(e.every(function(e){return e===!0})&&e.length<r){var i=t(),s="ug_photo"+i,o="photo"+i,u=n.last().clone().attr("for",s).children().attr("name",o).attr("id",s).parent();n.last().after(u)}});jQuery("#linksubform").submit(function(t){t.preventDefault();if(validateForm(this)){var n=jQuery(this).serialize(),r="&";jQuery('*[id^="linksub_"]').each(function(e){e>0&&(r+="&");r+=jQuery(this).attr("id");r+="=";r+=jQuery(this).val()});e===!0&&console.log(n);e===!0&&console.log(r);jQuery.ajax({type:"POST",cache:!1,url:MakeAjax.makeajaxurl,data:n+r,success:i,error:s})}else{e===!0&&alert("Valid: "+console.log(jQuery("#linksubform").valid()));l("#linksub")}});jQuery("#articleform").submit(function(t){t.preventDefault();if(validateForm(this)){var n=jQuery(this).serialize(),r="&";jQuery('*[id^="article_"]').each(function(e){if(jQuery(this).prop("type")!=="radio"&&!jQuery(this).is("select")){e>0&&(r+="&");r+=jQuery(this).attr("id");r+="=";r+=jQuery(this).val()}});e===!0&&console.log(n);e===!0&&console.log(r);jQuery.ajax({type:"POST",cache:!1,url:MakeAjax.makeajaxurl,data:n+r,success:o,error:u})}else{e===!0&&alert("Valid: "+console.log(jQuery("#articleform").valid()));l("#article")}});jQuery("#xclose").click(function(){jQuery("#modal-uploader").modal("hide")})});